
 <%# Displaying every article  %>

<%# article title  %>
<h1><%= @article.title %></h1>

<%# article image  %>
<% begin %>
  <%= image_tag @article.imagePath, height: 300 %>
<% rescue => exception %>
  <%= image_tag "http://localhost:3000/assets/images.png", height: 300 %>
<% end %>

<%# article body  %>
<h3><%= @article.body %></h3>

<%# redirecting home page  %>
 <%= link_to "Home Page", root_path %>

<% @user = User.find(@article.user_id) %>

<%# comments of article  %>
<h2> Comments </h2> 
<% @article.comments.each do |comment|%>

<%# first level of comment %>
<% if comment.parent_id == nil %>
   <strong> 
   <%= comment.commenter %>:
   </strong> 
   <%= comment.body %><br>

   <%# reply link %>
   <%= link_to "reply", new_user_article_comment_path(@user, @article, article_id: @article.id, parent_id: comment.id), remote: true %> &nbsp &nbsp <br>
   <%# <%= link_to "Delete Comment", user_article_comment_path(@user, @article, comment), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } %> 
    
    <%# second level of comment %>
    <% comment.comments.each do |comm| %>
     <strong>
      &nbsp &nbsp <%= comm.commenter%>:
     </strong> 
      &nbsp <%= comm.body %>  
      <br>
   <% end %> 
 <% end %>   
 <% end %> 
 
 
<%# adding new comment %>
 <h2> Add a Comment </h2>
 <%= render 'comments/form', user: @user, article: @article, article_id: @article.id, parent_id: nil %>
 <%# <%= link_to "Comment", new_user_article_comment_path(@user, @article, article_id: @article.id, parent_id: nil), remote: true %>  

